\doxysection{Wall\+Collision\+System.\+hpp}
\hypertarget{WallCollisionSystem_8hpp_source}{}\label{WallCollisionSystem_8hpp_source}\index{src/Systems/WallCollisionSystem.hpp@{src/Systems/WallCollisionSystem.hpp}}
\mbox{\hyperlink{WallCollisionSystem_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ WALLCOLLISIONSYSTEM\_HPP}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ WALLCOLLISIONSYSTEM\_HPP}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}../Components/RigidBodyComponent.hpp"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}../Components/TagWallComponent.hpp"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}../Components/TagPlayerComponent.hpp"{}}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}../Components/PolygonColliderComponent.hpp"{}}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ "{}../Components/CircleColliderComponent.hpp"{}}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ "{}../ECS/ECS.hpp"{}}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ "{}../EventManager/EventManager.hpp"{}}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}../Events/CollisionEvent.hpp"{}}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classWallCollisionSystem}{WallCollisionSystem}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classSystem}{System}}\ \{}
\DoxyCodeLine{00025\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00029\ \ \ \ \ \mbox{\hyperlink{classWallCollisionSystem_adb78f66962283cb4b7501549213a0741}{WallCollisionSystem}}()\ \{}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{RequireComponent<TagWallComponent>}}();}
\DoxyCodeLine{00031\ \ \ \ \ \}}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWallCollisionSystem_a67f64145fed0777cd43ebe0bd57303f4}{SubscribeToCollisionEvent}}(std::unique\_ptr<EventManager>\&\ eventManager)\ \{}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ eventManager-\/>SubscribeToEvent<\mbox{\hyperlink{classCollisionEvent}{CollisionEvent}},\ \mbox{\hyperlink{classWallCollisionSystem}{WallCollisionSystem}}>(\textcolor{keyword}{this},}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{classWallCollisionSystem_a2ae9adc347fefc19e9a9560e125e97b9}{WallCollisionSystem::OnCollision}});}
\DoxyCodeLine{00039\ \ \ \ \ \}}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWallCollisionSystem_a2ae9adc347fefc19e9a9560e125e97b9}{OnCollision}}(\mbox{\hyperlink{classCollisionEvent}{CollisionEvent}}\&\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{e}})\ \{}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{aIsWall}}\ =\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{e}}.a.HasComponent<\mbox{\hyperlink{structTagWallComponent}{TagWallComponent}}>();}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{bIsWall}}\ =\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{e}}.b.HasComponent<\mbox{\hyperlink{structTagWallComponent}{TagWallComponent}}>();}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{aIsPlayer}}\ =\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{e}}.a.HasComponent<\mbox{\hyperlink{structTagPlayerComponent}{TagPlayerComponent}}>();}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{bIsPlayer}}\ =\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{e}}.b.HasComponent<\mbox{\hyperlink{structTagPlayerComponent}{TagPlayerComponent}}>();}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{aIsWall}}\ ||\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{bIsWall}})\ \&\&\ (\mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{aIsPlayer}}||\mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{bIsPlayer}}))\ \{}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classEntity}{Entity}}\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{move}}\ =\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{aIsWall}}\ ?\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{e}}.b\ :\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{e}}.a;\ \ \textcolor{comment}{//\ Determinamos\ cuál\ es\ la\ entidad\ que\ se\ mueve}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{move}}.HasComponent<\mbox{\hyperlink{structTransformComponent}{TransformComponent}}>()\ \&\&\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{move}}.HasComponent<\mbox{\hyperlink{structRigidBodyComponent}{RigidBodyComponent}}>())\ \{}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{transform}}\ =\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{move}}.\mbox{\hyperlink{classEntity_ac79960abe9d3005efc7ce39ebedc0776}{GetComponent}}<\mbox{\hyperlink{structTransformComponent}{TransformComponent}}>();}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{circleCollider}}\ =\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{move}}.GetComponent<\mbox{\hyperlink{structCircleColliderComponent}{CircleColliderComponent}}>();}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{rigidBody}}\ =\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{move}}.GetComponent<\mbox{\hyperlink{structRigidBodyComponent}{RigidBodyComponent}}>();}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ radius\ =\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{circleCollider}}.radius;}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}[WallCollisionSystem]\ Colisión\ de\ la\ entidad\ "{}}\ <<\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{e}}.a.GetId()}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ y\ "{}}\ <<\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{e}}.b.GetId()\ <<\ std::endl;}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{rigidBody}}.velocity.x\ <\ 0)\ \{\ \ }
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Colisión\ desde\ la\ derecha,\ moviendo\ a\ la\ derecha."{}}\ <<\ std::endl;}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{transform}}.position.x\ =\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{e}}.a.GetComponent<\mbox{\hyperlink{structTransformComponent}{TransformComponent}}>().position.x\ +\ radius;\ \ }
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{rigidBody}}.velocity.x\ >\ 0)\ \{\ }
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{transform}}.position.x\ =\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{e}}.a.GetComponent<\mbox{\hyperlink{structTransformComponent}{TransformComponent}}>().position.x\ -\/\ radius\ ;\ \ }
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{rigidBody}}.velocity.y\ <\ 0)\ \{\ }
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{transform}}.position.y\ =\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{e}}.a.GetComponent<\mbox{\hyperlink{structTransformComponent}{TransformComponent}}>().position.y\ +\ radius;}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{rigidBody}}.velocity.y\ >\ 0)\ \{\ }
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{transform}}.position.y\ =\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{e}}.a.GetComponent<\mbox{\hyperlink{structTransformComponent}{TransformComponent}}>().position.y\ -\/\ radius;}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{rigidBody}}.velocity.x\ =\ 0;\ \ }
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{rigidBody}}.velocity.y\ =\ 0;\ \ }
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00084\ \ \ \ \ \}}
\DoxyCodeLine{00085\ \};}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
